<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fubon.portal.repository.AgentMapper">
  <resultMap id="BaseResultMap" type="com.fubon.portal.repository.Agent">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri May 08 11:51:10 CST 2020.
    -->
    <result column="SYS_ID" jdbcType="VARCHAR" property="sysId" />
    <result column="USER_ID" jdbcType="VARCHAR" property="userId" />
    <result column="USER_NAME" jdbcType="VARCHAR" property="userName" />
    <result column="AGENT_ID" jdbcType="VARCHAR" property="agentId" />
    <result column="SYS_NAME" jdbcType="VARCHAR" property="sysName" />
    <result column="START_TIME" jdbcType="TIMESTAMP" property="startTime" />
    <result column="END_TIME" jdbcType="TIMESTAMP" property="endTime" />
    <result column="SN" jdbcType="DECIMAL" property="sn" />
  </resultMap>
  
  
  <select id="findAgent" resultMap="BaseResultMap">
    <![CDATA[
      select AU_SYSTEM.SYS_NAME, PORTAL_AGENT.*, AU_USER.USER_NAME
      from PORTAL_AGENT 
      inner join AU_SYSTEM on PORTAL_AGENT.SYS_ID = AU_SYSTEM.SYS_ID
      inner join AU_USER on PORTAL_AGENT.USER_ID = AU_USER.USER_ID
      where AGENT_ID = #{agentId,jdbcType=VARCHAR} and START_TIME <= TO_DATE(#{checkDate,jdbcType=VARCHAR}, 'YYYY-MM-DD')  and  END_TIME >= TO_DATE(#{checkDate,jdbcType=VARCHAR}, 'YYYY-MM-DD') 
    ]]>
  </select>
  
  <!-- 
  <select id="findAgent2" resultType="com.fubon.portal.repository.Agent">
    <![CDATA[
      select PORTAL_AGENT.SN as sn, PORTAL_AGENT.SYS_ID as sysId, PORTAL_AGENT.USER_ID as userId,  AU_USER.USER_NAME userName, PORTAL_AGENT.AGENT_ID as agentId, PORTAL_AGENT.SYS_NAME as sysName, PORTAL_AGENT.START_TIME as startTime, PORTAL_AGENT.END_TIME as endTime
      from PORTAL_AGENT inner join AU_USER on PORTAL_AGENT.USER_ID = AU_USER.USER_ID
      where AGENT_ID = #{agentId,jdbcType=VARCHAR} and START_TIME <= TO_DATE(#{checkDate,jdbcType=VARCHAR}, 'YYYY-MM-DD')  and  END_TIME >= TO_DATE(#{checkDate,jdbcType=VARCHAR}, 'YYYY-MM-DD') 
    ]]>
  </select>
   -->
</mapper>