<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fubon.portal.repository.AnnounceInfoMapper">
  <resultMap id="BaseResultMap" type="com.fubon.portal.repository.AnnounceInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri May 08 12:06:00 CST 2020.
    -->
    <result column="PRIORITY" jdbcType="DECIMAL" property="priority" />
    <result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime" />
    <result column="START_TIME" jdbcType="TIMESTAMP" property="startTime" />
    <result column="END_TIME" jdbcType="TIMESTAMP" property="endTime" />
    <result column="SN" jdbcType="DECIMAL" property="sn" />
    <result column="TITLE" jdbcType="VARCHAR" property="title" />
    <result column="CONTENT" jdbcType="VARCHAR" property="content" />
  </resultMap>
  <insert id="insert" parameterType="com.fubon.portal.repository.AnnounceInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri May 08 12:06:00 CST 2020.
    -->
    <selectKey keyProperty="sn" order="BEFORE" resultType="java.lang.Short">
      select PORTAL_SEQ.nextval from dual
    </selectKey>
    insert into MXACC.PORTAL_ANNOUNCE (PRIORITY, CREATE_TIME, START_TIME, 
      END_TIME, SN, TITLE, 
      CONTENT)
    values (#{priority,jdbcType=DECIMAL}, #{createTime,jdbcType=TIMESTAMP}, #{startTime,jdbcType=TIMESTAMP}, 
      #{endTime,jdbcType=TIMESTAMP}, #{sn,jdbcType=DECIMAL}, #{title,jdbcType=VARCHAR}, 
      #{content,jdbcType=VARCHAR})
  </insert>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri May 08 12:06:00 CST 2020.
    -->
    select PRIORITY, CREATE_TIME, START_TIME, END_TIME, SN, TITLE, CONTENT
    from MXACC.PORTAL_ANNOUNCE
  </select>
  
  <select id="findAnnounceInfoList" resultMap="BaseResultMap">
    
    <choose>
    <when test="showExpired==false">
    <![CDATA[
	    select *
	    from MXACC.PORTAL_ANNOUNCE
	    WHERE  END_TIME >= TO_DATE(#{checkDate,jdbcType=VARCHAR}, 'YYYY-MM-DD')
        ORDER BY PRIORITY, CREATE_TIME
	]]>
	</when>
	<otherwise>
	<![CDATA[
		select *
	    from MXACC.PORTAL_ANNOUNCE
	    WHERE  END_TIME < TO_DATE(#{checkDate,jdbcType=VARCHAR}, 'YYYY-MM-DD')
        ORDER BY PRIORITY, CREATE_TIME
    ]]>    
	</otherwise>
	</choose>
  </select>
</mapper>